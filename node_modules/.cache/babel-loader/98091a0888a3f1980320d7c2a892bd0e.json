{"ast":null,"code":"import _defineProperty from\"/Users/mac/Desktop/sky/skyalert-New/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _objectSpread from\"/Users/mac/Desktop/sky/skyalert-New/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _classCallCheck from\"/Users/mac/Desktop/sky/skyalert-New/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"/Users/mac/Desktop/sky/skyalert-New/node_modules/@babel/runtime/helpers/esm/createClass.js\";/* eslint-disable-next-line */import Schema from'./schema';/**\n * Super class to do composition over\n * all models\n * @class SuperClass\n */var BaseModel=/*#__PURE__*/function(){/**\n   * Creates an instance of SuperClass.\n   * @param {Schema} schema\n   * @memberof SuperClass\n   */function BaseModel(schema){var alias=arguments.length>1&&arguments[1]!==undefined?arguments[1]:'model';_classCallCheck(this,BaseModel);Object.defineProperty(this,'schema',{enumerable:false,configurable:false,writable:false,value:schema});Object.defineProperty(this,'alias',{enumerable:false,configurable:false,writable:false,value:alias.toLowerCase()});}/**\n   * Get all attributes that can be edited\n   * @returns Object\n   * @memberof SuperClass\n   */_createClass(BaseModel,[{key:\"getEditable\",value:function getEditable(){var _this=this;var attributes=this.schema.getAllEditable();var labels=this.schema.getAllLabels();return attributes.reduce(function(acc,current){var label=current.split('.');var name;if(label.length>2){var exists=_this[label[0]]&&_this[label[0]][label[1]];name=labels[current]?labels[current]:label[2];return _objectSpread(_objectSpread({},acc),{},_defineProperty({},name,{key:current,type:_this.schema[label[0]][label[1]][label[2]].type,value:exists?_this[label[0]][label[1]][label[2]]:undefined,options:exists&&_this.schema.hasEnum(_this.schema[label[0]][label[1]][label[2]])?_this.schema[label[0]][label[1]][label[2]].enumLabels||_this.schema[label[0]][label[1]][label[2]].enum:undefined}));}if(label.length>1){var _exists=!!_this[label[0]];name=labels[current]?labels[current]:label[1];return _objectSpread(_objectSpread({},acc),{},_defineProperty({},name,{key:current,type:_this.schema[label[0]][label[1]].type,value:_exists?_this[label[0]][label[1]]:undefined,options:_exists&&_this.schema.hasEnum(_this.schema[label[0]][label[1]])?_this.schema[label[0]][label[1]].enumLabels||_this.schema[label[0]][label[1]].enum:undefined}));}if(label.length>0){name=labels[current]||label[0];return _objectSpread(_objectSpread({},acc),{},_defineProperty({},name,{key:current,type:_this.schema[label[0]].type,value:_this[label[0]],options:_this.schema.hasEnum(_this.schema[label[0]])?_this.schema[label[0]].enumLabels||_this.schema[label[0]].enum:undefined}));}return _objectSpread({},acc);},{});}/**\n   * Saves de editable Object\n   * @param {Object} editable\n   * @memberof BaseModel\n   */},{key:\"saveEditable\",value:function saveEditable(editable){var _this2=this;var labels=this.schema.getAllLabels();var labelKeys=Object.keys(labels);var getLabel=function getLabel(value){return labelKeys.find(function(key){return labels[key]===value;});};var save=function save(key,value){var keys=key.split('.');/* eslint-disable indent */switch(keys.length){case 1:_this2[keys[0]]=value;break;case 2:if(_this2[keys[0]]===undefined)_this2[keys[0]]={};_this2[keys[0]][keys[1]]=value;break;case 3:if(_this2[keys[0]]===undefined)_this2[keys[0]]={};if(_this2[keys[0]][keys[1]]===undefined)_this2[keys[0]][keys[1]]={};_this2[keys[0]][keys[1]][keys[2]]=value;break;default:console.error('Not a valid key');throw new Error('Not a valid key');}/* eslint-enable indent */};Object.keys(editable).forEach(function(key){var label=getLabel(key);if(key===labels[label]){save(label,editable[key].value);}});return this;}}]);return BaseModel;}();export{BaseModel as default};","map":{"version":3,"names":["Schema","BaseModel","schema","alias","Object","defineProperty","enumerable","configurable","writable","value","toLowerCase","attributes","getAllEditable","labels","getAllLabels","reduce","acc","current","label","split","name","length","exists","key","type","undefined","options","hasEnum","enumLabels","enum","editable","labelKeys","keys","getLabel","find","save","console","error","Error","forEach"],"sources":["/Users/mac/Desktop/sky/skyalert-New/src/utils/basemodel.js"],"sourcesContent":["/* eslint-disable-next-line */\nimport Schema from './schema';\n\n/**\n * Super class to do composition over\n * all models\n * @class SuperClass\n */\nexport default class BaseModel {\n  /**\n   * Creates an instance of SuperClass.\n   * @param {Schema} schema\n   * @memberof SuperClass\n   */\n  constructor(schema, alias = 'model') {\n    Object.defineProperty(this, 'schema', {\n      enumerable: false,\n      configurable: false,\n      writable: false,\n      value: schema,\n    });\n\n    Object.defineProperty(this, 'alias', {\n      enumerable: false,\n      configurable: false,\n      writable: false,\n      value: alias.toLowerCase(),\n    });\n  }\n\n  /**\n   * Get all attributes that can be edited\n   * @returns Object\n   * @memberof SuperClass\n   */\n  getEditable() {\n    const attributes = this.schema.getAllEditable();\n    const labels = this.schema.getAllLabels();\n\n    return attributes.reduce((acc, current) => {\n      const label = current.split('.');\n      let name;\n\n      if (label.length > 2) {\n        const exists = (this[label[0]] && this[label[0]][label[1]]);\n        name = (labels[current]) ? labels[current] : label[2];\n\n        return {\n          ...acc,\n          [name]: {\n            key: current,\n            type: this.schema[label[0]][label[1]][label[2]].type,\n            value: exists ? this[label[0]][label[1]][label[2]] : undefined,\n            options: (exists && this.schema.hasEnum(this.schema[label[0]][label[1]][label[2]]))\n              ?\n              this.schema[label[0]][label[1]][label[2]].enumLabels\n              || this.schema[label[0]][label[1]][label[2]].enum\n              : undefined,\n          },\n        };\n      }\n\n      if (label.length > 1) {\n        const exists = !!this[label[0]];\n        name = (labels[current]) ? labels[current] : label[1];\n\n        return {\n          ...acc,\n          [name]: {\n            key: current,\n            type: this.schema[label[0]][label[1]].type,\n            value: exists ? this[label[0]][label[1]] : undefined,\n            options: (exists && this.schema.hasEnum(this.schema[label[0]][label[1]]))\n              ? this.schema[label[0]][label[1]].enumLabels || this.schema[label[0]][label[1]].enum\n              : undefined,\n          },\n\n        };\n      }\n\n      if (label.length > 0) {\n        name = labels[current] || label[0];\n\n        return {\n          ...acc,\n          [name]: {\n            key: current,\n            type: this.schema[label[0]].type,\n            value: this[label[0]],\n            options: (this.schema.hasEnum(this.schema[label[0]]))\n              ? this.schema[label[0]].enumLabels || this.schema[label[0]].enum\n              : undefined,\n          },\n        };\n      }\n\n      return { ...acc };\n    }, {});\n  }\n\n  /**\n   * Saves de editable Object\n   * @param {Object} editable\n   * @memberof BaseModel\n   */\n  saveEditable(editable) {\n    const labels = this.schema.getAllLabels();\n    const labelKeys = Object.keys(labels);\n\n    const getLabel = value => labelKeys.find(key => labels[key] === value);\n\n    const save = (key, value) => {\n      const keys = key.split('.');\n      /* eslint-disable indent */\n      switch (keys.length) {\n        case 1:\n          this[keys[0]] = value;\n          break;\n\n        case 2:\n          if (this[keys[0]] === undefined) this[keys[0]] = {};\n          this[keys[0]][keys[1]] = value;\n          break;\n\n        case 3:\n          if (this[keys[0]] === undefined) this[keys[0]] = {};\n          if (this[keys[0]][keys[1]] === undefined) this[keys[0]][keys[1]] = {};\n          this[keys[0]][keys[1]][keys[2]] = value;\n          break;\n\n        default:\n          console.error('Not a valid key');\n          throw new Error('Not a valid key');\n      }\n      /* eslint-enable indent */\n    };\n\n    Object.keys(editable).forEach((key) => {\n      const label = getLabel(key);\n\n      if (key === labels[label]) {\n        save(label, editable[key].value);\n      }\n    });\n\n    return this;\n  }\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}