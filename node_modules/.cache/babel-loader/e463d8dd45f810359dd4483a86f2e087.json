{"ast":null,"code":"\"use strict\";\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nexports.__esModule = true;\nexports.default = void 0;\n\nvar _regenerator = _interopRequireDefault(require(\"@babel/runtime/regenerator\"));\n\nvar _extends2 = _interopRequireDefault(require(\"@babel/runtime/helpers/extends\"));\n\nvar _assertThisInitialized2 = _interopRequireDefault(require(\"@babel/runtime/helpers/assertThisInitialized\"));\n\nvar _inheritsLoose2 = _interopRequireDefault(require(\"@babel/runtime/helpers/inheritsLoose\"));\n\nvar _defineProperty2 = _interopRequireDefault(require(\"@babel/runtime/helpers/defineProperty\"));\n\nvar _react = _interopRequireWildcard(require(\"react\"));\n\nvar _Process = _interopRequireDefault(require(\"./Process\"));\n\nvar _Fields = _interopRequireDefault(require(\"./constants/Fields\"));\n\nvar Login = /*#__PURE__*/function (_Component) {\n  (0, _inheritsLoose2.default)(Login, _Component);\n\n  function Login() {\n    var _this;\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _Component.call.apply(_Component, [this].concat(args)) || this;\n    (0, _defineProperty2.default)((0, _assertThisInitialized2.default)(_this), \"handleClick\", function _callee2(evn) {\n      var _this$props, handleProcess, onCompleted, onError, onSuccess;\n\n      return _regenerator.default.async(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              evn.preventDefault();\n              _this$props = _this.props, handleProcess = _this$props.handleProcess, onCompleted = _this$props.onCompleted, onError = _this$props.onError, onSuccess = _this$props.onSuccess;\n              _context2.prev = 2;\n              _context2.next = 5;\n              return _regenerator.default.awrap(handleProcess(function _callee(api) {\n                var _this$props2, scope, fields, returnScopes, rerequest, reauthorize, eventKey, loginQpts, authType, loginResponse, data;\n\n                return _regenerator.default.async(function _callee$(_context) {\n                  while (1) {\n                    switch (_context.prev = _context.next) {\n                      case 0:\n                        _this$props2 = _this.props, scope = _this$props2.scope, fields = _this$props2.fields, returnScopes = _this$props2.returnScopes, rerequest = _this$props2.rerequest, reauthorize = _this$props2.reauthorize, eventKey = _this$props2.eventKey;\n                        loginQpts = {\n                          scope: scope\n                        };\n                        authType = [];\n\n                        if (returnScopes) {\n                          loginQpts.return_scopes = true;\n                        }\n\n                        if (rerequest) {\n                          authType.push('rerequest');\n                        }\n\n                        if (reauthorize) {\n                          authType.push('reauthenticate');\n                        }\n\n                        if (authType.length) {\n                          loginQpts.auth_type = authType.join(',');\n                        }\n\n                        _context.next = 9;\n                        return _regenerator.default.awrap(api.login(loginQpts));\n\n                      case 9:\n                        loginResponse = _context.sent;\n\n                        if (!(loginResponse.status !== 'connected')) {\n                          _context.next = 12;\n                          break;\n                        }\n\n                        throw new Error('Unauthorized user');\n\n                      case 12:\n                        _context.next = 14;\n                        return _regenerator.default.awrap(api.getTokenDetailWithProfile({\n                          fields: fields\n                        }, loginResponse));\n\n                      case 14:\n                        data = _context.sent;\n\n                        if (!onCompleted) {\n                          _context.next = 18;\n                          break;\n                        }\n\n                        _context.next = 18;\n                        return _regenerator.default.awrap(onCompleted((0, _extends2.default)({}, data, {\n                          eventKey: eventKey\n                        })));\n\n                      case 18:\n                        return _context.abrupt(\"return\", data);\n\n                      case 19:\n                      case \"end\":\n                        return _context.stop();\n                    }\n                  }\n                });\n              }, onSuccess));\n\n            case 5:\n              _context2.next = 10;\n              break;\n\n            case 7:\n              _context2.prev = 7;\n              _context2.t0 = _context2[\"catch\"](2);\n\n              if (onError) {\n                onError(_context2.t0);\n              }\n\n            case 10:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, null, null, [[2, 7]]);\n    });\n    return _this;\n  }\n\n  var _proto = Login.prototype;\n\n  _proto.render = function render() {\n    var _this$props3 = this.props,\n        children = _this$props3.children,\n        loading = _this$props3.loading,\n        error = _this$props3.error,\n        data = _this$props3.data;\n    return children({\n      loading: loading,\n      handleClick: this.handleClick,\n      error: error,\n      data: data\n    });\n  };\n\n  return Login;\n}(_react.Component);\n\n(0, _defineProperty2.default)(Login, \"defaultProps\", {\n  scope: '',\n  fields: _Fields.default,\n  returnScopes: false,\n  rerequest: false,\n  reauthorize: false,\n  onCompleted: undefined,\n  onError: undefined,\n  eventKey: undefined\n});\n\nvar _default = (0, _react.forwardRef)(function (props, ref) {\n  return _react.default.createElement(_Process.default, null, function (_ref) {\n    var loading = _ref.loading,\n        handleProcess = _ref.handleProcess,\n        data = _ref.data,\n        error = _ref.error;\n    return _react.default.createElement(Login, (0, _extends2.default)({}, props, {\n      loading: loading,\n      handleProcess: handleProcess,\n      data: data,\n      error: error,\n      ref: ref\n    }));\n  });\n});\n\nexports.default = _default;","map":{"version":3,"mappings":"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","names":["Login","evn","preventDefault","_this$props","_this","props","handleProcess","onCompleted","onError","onSuccess","_context2","api","_this$props2","scope","fields","returnScopes","rerequest","reauthorize","eventKey","loginQpts","authType","return_scopes","push","length","auth_type","join","_context","login","loginResponse","status","Error","getTokenDetailWithProfile","data","render","children","loading","error","handleClick","Component","Fields","undefined","ref","_react","_Process"],"sources":["/var/www/html/nuevo-skyalert-react/node_modules/react-facebook/src/Login.jsx"],"sourcesContent":["// @flow\nimport React, { Component, forwardRef } from 'react';\nimport Process from './Process';\nimport Fields from './constants/Fields';\n\ntype Props = {\n  children: Function,\n  handleProcess: Function,\n  loading: boolean,\n  data: any,\n  error: Error,\n  scope?: string,\n  fields?: string[],\n  returnScopes?: boolean,\n  rerequest?: boolean,\n  reauthorize?: boolean,\n  onCompleted?: Function,\n  onError?: Function,\n  eventKey?: any,\n};\n\nclass Login extends Component<Props> {\n  static defaultProps = {\n    scope: '',\n    fields: Fields,\n    returnScopes: false,\n    rerequest: false,\n    reauthorize: false,\n    onCompleted: undefined,\n    onError: undefined,\n    eventKey: undefined,\n  };\n\n  handleClick = async (evn) => {\n    evn.preventDefault();\n\n    const {\n      handleProcess, onCompleted, onError, onSuccess,\n    } = this.props;\n\n    try {\n      await handleProcess(async (api) => {\n        const {\n          scope, fields, returnScopes, rerequest, reauthorize, eventKey,\n        } = this.props;\n        const loginQpts = { scope };\n        const authType = [];\n\n        if (returnScopes) {\n          loginQpts.return_scopes = true;\n        }\n\n        if (rerequest) {\n          authType.push('rerequest');\n        }\n\n        if (reauthorize) {\n          authType.push('reauthenticate');\n        }\n\n        if (authType.length) {\n          loginQpts.auth_type = authType.join(',');\n        }\n\n        const loginResponse = await api.login(loginQpts);\n        if (loginResponse.status !== 'connected') {\n          throw new Error('Unauthorized user');\n        }\n\n        const data = await api.getTokenDetailWithProfile({ fields }, loginResponse);\n\n        if (onCompleted) {\n          await onCompleted({\n            ...data,\n            eventKey,\n          });\n        }\n\n        return data;\n      }, onSuccess);\n    } catch (error) {\n      if (onError) {\n        onError(error);\n      }\n    }\n  }\n\n  render() {\n    const {\n      children, loading, error, data,\n    } = this.props;\n\n    return children({\n      loading,\n      handleClick: this.handleClick,\n      error,\n      data,\n    });\n  }\n}\n\nexport default forwardRef((props, ref) => (\n  <Process>\n    {({\n      loading, handleProcess, data, error,\n    }) => (\n      <Login\n        {...props}\n        loading={loading}\n        handleProcess={handleProcess}\n        data={data}\n        error={error}\n        ref={ref}\n      />\n    )}\n  </Process>\n));\n"]},"metadata":{},"sourceType":"script"}