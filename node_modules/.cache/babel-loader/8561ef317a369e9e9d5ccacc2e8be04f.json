{"ast":null,"code":"/* eslint  max-len: 0 */\nimport { merge } from 'lodash';\nimport fetch from 'node-fetch';\nimport commonApi from './config';\nconst PRIORITY = {\n  none: 'none',\n  first: 'first',\n  now: 'now'\n};\nconst PICS = {\n  author: commonApi.skyalert.endpoint.authorsPic.name,\n  image: commonApi.skyalert.endpoint.imagesPic.name\n};\nconst THUMBS = {\n  author: commonApi.skyalert.endpoint.authorsThumb.name,\n  image: commonApi.skyalert.endpoint.imagesThumb.name\n};\nlet api = commonApi;\nconst SYSTEM = process.env.REACT_APP_COUNTRY;\nconst LANGUAGE = process.env.REACT_APP_LANGUAGE;\n\nclass SkyAlertAPI {\n  constructor() {\n    let headers = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n    if (!SkyAlertAPI.instance) {\n      this.sessionLog = [];\n      api = merge(commonApi, headers);\n      SkyAlertAPI.instance = this;\n    }\n\n    return SkyAlertAPI.instance;\n  }\n\n  static init() {\n    let headers = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    return new SkyAlertAPI(headers);\n  }\n\n  async sendRequest(url, method, body) {\n    let tryAndRecover = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : [];\n    let priority = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : PRIORITY.none;\n    let multipart = arguments.length > 5 && arguments[5] !== undefined ? arguments[5] : false;\n    let headers = arguments.length > 6 && arguments[6] !== undefined ? arguments[6] : {};\n    let isReturnStatus = arguments.length > 7 && arguments[7] !== undefined ? arguments[7] : false;\n    const {\n      headers: headersApi,\n      response: {\n        error,\n        serverError,\n        done\n      }\n    } = api.skyalert;\n    const request = {\n      method,\n      headers: headers || headersApi,\n      body: body && !multipart ? JSON.stringify(body) : undefined\n    };\n\n    if (multipart) {\n      delete request.headers['Content-Type'];\n      request.body = body;\n    }\n\n    const response = await fetch(url, request);\n\n    if (isReturnStatus) {\n      return response.status;\n    }\n\n    switch (response.status) {\n      case done:\n        return true;\n\n      case error:\n      case serverError:\n        {\n          const responseBody = await response.json();\n          throw new Error(responseBody.error);\n        }\n\n      default:\n        {\n          const responseBody = await response.json();\n          return responseBody;\n        }\n    }\n  }\n  /* Utilities */\n\n\n  static objToGetParams(obj) {\n    const params = Object.keys(obj).map(key => {\n      if (obj[key] !== null && obj[key] !== undefined) {\n        if (obj[key] instanceof Array) {\n          return obj[key].map(param => `${key}[]=${param}`).join('&');\n        }\n\n        return `${key}=${obj[key]}`;\n      }\n\n      return null;\n    }).filter(param => param);\n    return `?${params.join('&')}`;\n  }\n\n  async buildAndFetch(endpoint, body) {\n    let tryAndRecover = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : [SkyAlertAPI.tryAndRecover()];\n    let priority = arguments.length > 3 ? arguments[3] : undefined;\n    let isCached = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : false;\n    const {\n      name,\n      method\n    } = endpoint;\n    const root = isCached ? api.skyalert[ENVIRONMENT].cdn : api.skyalert[ENVIRONMENT].root;\n    const url = root + name;\n    return (await this.sendRequest(url, method, body, tryAndRecover, priority)).data;\n  }\n\n  async buildAndFetchList(endpoint, page, elementsPerPage) {\n    let extra = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};\n    let isCached = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : false;\n    const {\n      name,\n      method\n    } = endpoint;\n    const params = {\n      page,\n      epp: elementsPerPage,\n      ...extra\n    };\n    const root = isCached ? api.skyalert[ENVIRONMENT].cdn : api.skyalert[ENVIRONMENT].root;\n    const url = `${root}${name}${SkyAlertAPI.objToGetParams(params)}`;\n    return this.sendRequest(url, method, undefined, [SkyAlertAPI.tryAndRecover()]);\n  }\n\n  async buildAndFetchMultipart(endpoint, body, file) {\n    const {\n      name,\n      method\n    } = endpoint;\n    const url = api.skyalert.root + name;\n    const formData = new FormData();\n    formData.append('body', JSON.stringify(body));\n\n    if (file) {\n      if (file instanceof Array) {\n        file.forEach(f => formData.append('file[]', f));\n      } else {\n        formData.append('file', file);\n      }\n    }\n\n    return (await this.sendRequest(url, method, formData, [SkyAlertAPI.tryAndRecover()], undefined, true)).data;\n  }\n  /* Configs data */\n\n\n  getTags() {\n    return this.buildAndFetch(api.skyalert.endpoint.tags, undefined, undefined, undefined, true);\n  }\n\n  getTagCategories() {\n    return this.buildAndFetch(api.skyalert.endpoint.tagCategories, undefined, undefined, undefined, true);\n  }\n\n  static async recoverFromExpiredToken(queueRequest, response) {\n    console.error('Credentials error');\n  }\n\n  static tryAndRecover() {\n    return {\n      status: api.skyalert.response.error,\n      recover: SkyAlertAPI.recoverFromExpiredToken\n    };\n  }\n  /* Articles */\n\n\n  getFeed(page, elementsPerPage, tags, type) {\n    const {\n      getFeedPage\n    } = api.skyalert.endpoint;\n    return this.buildAndFetchList(getFeedPage, page, elementsPerPage, {\n      tags,\n      type,\n      system: SYSTEM,\n      language: LANGUAGE\n    }, true);\n  }\n\n  async getArticles(page, elementsPerPage, search, author) {\n    const {\n      getArticles\n    } = api.skyalert.endpoint;\n    return this.buildAndFetchList(getArticles, page, elementsPerPage, {\n      search,\n      author\n    }, true);\n  }\n\n  async getArticle(idOrSlug) {\n    const {\n      name,\n      method\n    } = api.skyalert.endpoint.getArticle;\n    return this.buildAndFetch({\n      method,\n      name: name(idOrSlug)\n    }, undefined, undefined, undefined, true);\n  }\n\n  async getArticleRelated(idOrSlug) {\n    const {\n      name,\n      method\n    } = api.skyalert.endpoint.getArticlesRelated;\n    return this.buildAndFetch({\n      method,\n      name: name(idOrSlug)\n    }, undefined, undefined, undefined, true);\n  }\n  /* Authors */\n\n\n  async getAuthor(idOrSlug) {\n    const {\n      name,\n      method\n    } = api.skyalert.endpoint.getAuthor;\n    return this.buildAndFetch({\n      method,\n      name: name(idOrSlug)\n    }, undefined, undefined, undefined, true);\n  }\n  /* PICS */\n\n\n  static getPicURL(idOrSlug, type) {\n    const name = PICS[type];\n    const url = api.skyalert[ENVIRONMENT].cdn + name(idOrSlug);\n    return url;\n  }\n  /* THUMBS */\n\n\n  static getThumbURL(idOrSlug, type) {\n    const name = THUMBS[type];\n    const url = api.skyalert[ENVIRONMENT].cdn + name(idOrSlug);\n    return url;\n  }\n  /* LEADS */\n\n\n  async createLead(body) {\n    const {\n      name,\n      method\n    } = api.skyalert.aws.endpoint;\n    const {\n      headers\n    } = api.skyalert.aws.production;\n    const root = api.skyalert.aws.production.root;\n    const url = root + name;\n    return await this.sendRequest(url, method, body, undefined, undefined, false, headers, true);\n  }\n\n}\n/*\n\n             *     ,MMM8&&&.            *             In Memoriam\n                  MMMM88&&&&&    .                    Coca (2016-2018)\n                 MMMM88&&&&&&&\n     *           MMM88&&&&&&&&\n                 MMM88&&&&&&&&\n                 'MMM88&&&&&&'\n                   'MMM8&&&'      *\n          |\\___/|\n          )     (             .              '\n         =\\     /=\n           )===(       *\n          /     \\\n          |     |\n         /       \\\n         \\       /\n  _/\\_/\\_/\\__  _/_/\\_/\\_/\\_/\\_/\\_/\\_/\\_/\\_/\\_\n  |  |  |  |( (  |  |  |  |  |  |  |  |  |  |\n  |  |  |  | ) ) |  |  |  |  |  |  |  |  |  |\n  |  |  |  |(_(  |  |  |  |  |  |  |  |  |  |\n  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |\n  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |\n\n*/\n\n\nexport default SkyAlertAPI;","map":{"version":3,"names":["merge","fetch","commonApi","PRIORITY","none","first","now","PICS","author","skyalert","endpoint","authorsPic","name","image","imagesPic","THUMBS","authorsThumb","imagesThumb","api","SYSTEM","process","env","REACT_APP_COUNTRY","LANGUAGE","REACT_APP_LANGUAGE","SkyAlertAPI","constructor","headers","instance","sessionLog","init","sendRequest","url","method","body","tryAndRecover","priority","multipart","isReturnStatus","headersApi","response","error","serverError","done","request","JSON","stringify","undefined","status","responseBody","json","Error","objToGetParams","obj","params","Object","keys","map","key","Array","param","join","filter","buildAndFetch","isCached","root","ENVIRONMENT","cdn","data","buildAndFetchList","page","elementsPerPage","extra","epp","buildAndFetchMultipart","file","formData","FormData","append","forEach","f","getTags","tags","getTagCategories","tagCategories","recoverFromExpiredToken","queueRequest","console","recover","getFeed","type","getFeedPage","system","language","getArticles","search","getArticle","idOrSlug","getArticleRelated","getArticlesRelated","getAuthor","getPicURL","getThumbURL","createLead","aws","production"],"sources":["/Users/mac/Desktop/sky/skyalert-New/src/api/SkyAlertAPI/index.js"],"sourcesContent":["\n/* eslint  max-len: 0 */\nimport { merge } from 'lodash';\nimport fetch from 'node-fetch';\nimport commonApi from './config';\n\nconst PRIORITY = {\n  none: 'none',\n  first: 'first',\n  now: 'now',\n};\n\nconst PICS = {\n  author: commonApi.skyalert.endpoint.authorsPic.name,\n  image: commonApi.skyalert.endpoint.imagesPic.name,\n};\n\nconst THUMBS = {\n  author: commonApi.skyalert.endpoint.authorsThumb.name,\n  image: commonApi.skyalert.endpoint.imagesThumb.name,\n};\n\nlet api = commonApi;\n\nconst SYSTEM = process.env.REACT_APP_COUNTRY;\nconst LANGUAGE = process.env.REACT_APP_LANGUAGE;\n\nclass SkyAlertAPI {\n  constructor(headers = {}) {\n    if (!SkyAlertAPI.instance) {\n      this.sessionLog = [];\n      api = merge(commonApi, headers);\n      SkyAlertAPI.instance = this;\n    }\n\n    return SkyAlertAPI.instance;\n  }\n\n  static init(headers = {}) {\n    return new SkyAlertAPI(headers);\n  }\n\n  async sendRequest(url, method, body, tryAndRecover = [], priority = PRIORITY.none, multipart = false, headers = {}, isReturnStatus = false) {\n    const { headers: headersApi, response: { error, serverError, done } } = api.skyalert;\n    const request = {\n      method,\n      headers: headers || headersApi,\n      body: (body && !multipart) ? JSON.stringify(body) : undefined,\n    };\n\n    if (multipart) {\n      delete request.headers['Content-Type'];\n      request.body = body;\n    }\n\n    const response = await fetch(url, request);\n\n    if(isReturnStatus){\n      return response.status;\n    }\n\n    switch (response.status) {\n    case done:\n      return true;\n    case error:\n    case serverError: {\n      const responseBody = await response.json();\n      throw new Error(responseBody.error);\n    }\n    default: {\n      const responseBody = await response.json();\n      return responseBody;\n    }\n    }\n  }\n\n  /* Utilities */\n\n  static objToGetParams(obj) {\n    const params = Object.keys(obj)\n      .map((key) => {\n        if (obj[key] !== null && obj[key] !== undefined) {\n          if (obj[key] instanceof Array) {\n            return obj[key]\n              .map(param => `${key}[]=${param}`)\n              .join('&');\n          }\n          return `${key}=${obj[key]}`;\n        }\n        return null;\n      })\n      .filter(param => param);\n    return `?${params.join('&')}`;\n  }\n\n  async buildAndFetch(endpoint, body, tryAndRecover = [SkyAlertAPI.tryAndRecover()], priority, isCached = false) {\n    const { name, method } = endpoint;\n    const root = isCached ? api.skyalert[ENVIRONMENT].cdn :api.skyalert[ENVIRONMENT].root;\n    const url = root + name;\n    return (await this.sendRequest(url, method, body, tryAndRecover, priority)).data;\n  }\n\n  async buildAndFetchList(endpoint, page, elementsPerPage, extra = {}, isCached = false) {\n    const { name, method } = endpoint;\n    const params = {\n      page,\n      epp: elementsPerPage,\n      ...extra,\n    };\n    const root = isCached ? api.skyalert[ENVIRONMENT].cdn : api.skyalert[ENVIRONMENT].root;\n    const url = `${root}${name}${SkyAlertAPI.objToGetParams(params)}`;\n    return this.sendRequest(url, method, undefined, [SkyAlertAPI.tryAndRecover()]);\n  }\n\n  async buildAndFetchMultipart(endpoint, body, file) {\n    const { name, method } = endpoint;\n    const url = api.skyalert.root + name;\n    const formData = new FormData();\n    formData.append('body', JSON.stringify(body));\n\n    if (file) {\n      if (file instanceof Array) {\n        file.forEach(f => formData.append('file[]', f));\n      } else {\n        formData.append('file', file);\n      }\n    }\n\n    return (await this.sendRequest(url, method, formData, [SkyAlertAPI.tryAndRecover()], undefined, true)).data;\n  }\n\n  /* Configs data */\n  getTags() {\n    return this.buildAndFetch(api.skyalert.endpoint.tags, undefined, undefined, undefined, true);\n  }\n\n  getTagCategories() {\n    return this.buildAndFetch(api.skyalert.endpoint.tagCategories, undefined, undefined, undefined, true);\n  }\n\n  static async recoverFromExpiredToken(queueRequest, response) {\n    console.error('Credentials error');\n  }\n\n  static tryAndRecover() {\n    return {\n      status: api.skyalert.response.error,\n      recover: SkyAlertAPI.recoverFromExpiredToken,\n    };\n  }\n\n\n  /* Articles */\n\n  getFeed(page, elementsPerPage, tags, type) {\n    const { getFeedPage } = api.skyalert.endpoint;\n    return this.buildAndFetchList(getFeedPage, page, elementsPerPage, { tags, type, system: SYSTEM, language: LANGUAGE}, true);\n  }\n\n  async getArticles(page, elementsPerPage, search, author) {\n    const { getArticles } = api.skyalert.endpoint;\n    return this.buildAndFetchList(getArticles, page, elementsPerPage, { search, author }, true);\n  }\n\n  async getArticle(idOrSlug) {\n    const { name, method } = api.skyalert.endpoint.getArticle;\n    return this.buildAndFetch({ method, name: name(idOrSlug) }, undefined, undefined, undefined, true);\n  }\n\n  async getArticleRelated(idOrSlug) {\n    const { name, method } = api.skyalert.endpoint.getArticlesRelated;\n    return this.buildAndFetch({ method, name: name(idOrSlug) }, undefined, undefined, undefined, true);\n  }\n\n  /* Authors */\n  async getAuthor(idOrSlug) {\n    const { name, method } = api.skyalert.endpoint.getAuthor;\n    return this.buildAndFetch({ method, name: name(idOrSlug) }, undefined, undefined, undefined, true);\n  }\n\n  /* PICS */\n  static getPicURL(idOrSlug, type) {\n    const name = PICS[type];\n    const url = api.skyalert[ENVIRONMENT].cdn + name(idOrSlug);\n    return url;\n  }\n\n  /* THUMBS */\n  static getThumbURL(idOrSlug, type) {\n    const name = THUMBS[type];\n    const url = api.skyalert[ENVIRONMENT].cdn + name(idOrSlug);\n    return url;\n  }\n\n  /* LEADS */\n  async createLead(body){\n    const { name, method } = api.skyalert.aws.endpoint;\n    const { headers }= api.skyalert.aws.production;\n    const root = api.skyalert.aws.production.root;\n    const url = root + name;\n    return await this.sendRequest(url, method, body, undefined, undefined, false, headers, true);\n  }\n}\n\n/*\n\n             *     ,MMM8&&&.            *             In Memoriam\n                  MMMM88&&&&&    .                    Coca (2016-2018)\n                 MMMM88&&&&&&&\n     *           MMM88&&&&&&&&\n                 MMM88&&&&&&&&\n                 'MMM88&&&&&&'\n                   'MMM8&&&'      *\n          |\\___/|\n          )     (             .              '\n         =\\     /=\n           )===(       *\n          /     \\\n          |     |\n         /       \\\n         \\       /\n  _/\\_/\\_/\\__  _/_/\\_/\\_/\\_/\\_/\\_/\\_/\\_/\\_/\\_\n  |  |  |  |( (  |  |  |  |  |  |  |  |  |  |\n  |  |  |  | ) ) |  |  |  |  |  |  |  |  |  |\n  |  |  |  |(_(  |  |  |  |  |  |  |  |  |  |\n  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |\n  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |\n\n*/\n\nexport default SkyAlertAPI;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}