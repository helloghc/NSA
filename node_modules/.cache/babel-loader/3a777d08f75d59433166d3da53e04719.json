{"ast":null,"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nexports.__esModule = true;\nexports.default = exports.Method = void 0;\n\nvar _regenerator = _interopRequireDefault(require(\"@babel/runtime/regenerator\"));\n\nvar _objectWithoutPropertiesLoose2 = _interopRequireDefault(require(\"@babel/runtime/helpers/objectWithoutPropertiesLoose\"));\n\nvar _extends2 = _interopRequireDefault(require(\"@babel/runtime/helpers/extends\"));\n\nvar _LoginStatus = _interopRequireDefault(require(\"./constants/LoginStatus\"));\n\nvar Method = {\n  GET: 'get',\n  POST: 'post',\n  DELETE: 'delete'\n};\nexports.Method = Method;\n\nvar Facebook = /*#__PURE__*/function () {\n  function Facebook(options) {\n    if (options === void 0) {\n      options = {};\n    }\n\n    this.options = (0, _extends2.default)({\n      domain: 'connect.facebook.net',\n      version: 'v3.2',\n      cookie: false,\n      status: false,\n      xfbml: false,\n      language: 'en_US',\n      frictionlessRequests: false,\n      debug: false,\n      chatSupport: false\n    }, options);\n\n    if (!this.options.appId) {\n      throw new Error('You need to set appId');\n    }\n\n    if (!this.options.wait) {\n      this.init();\n    }\n  }\n\n  var _proto = Facebook.prototype;\n\n  _proto.getAppId = function getAppId() {\n    return this.options.appId;\n  };\n\n  _proto.init = function init() {\n    var _this = this;\n\n    return _regenerator.default.async(function init$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            if (!this.loadingPromise) {\n              _context.next = 2;\n              break;\n            }\n\n            return _context.abrupt(\"return\", this.loadingPromise);\n\n          case 2:\n            this.loadingPromise = new Promise(function (resolve) {\n              var _this$options = _this.options,\n                  domain = _this$options.domain,\n                  language = _this$options.language,\n                  debug = _this$options.debug,\n                  chatSupport = _this$options.chatSupport,\n                  restOptions = (0, _objectWithoutPropertiesLoose2.default)(_this$options, [\"domain\", \"language\", \"debug\", \"chatSupport\"]);\n\n              window.fbAsyncInit = function () {\n                window.FB.init({\n                  appId: restOptions.appId,\n                  version: restOptions.version,\n                  cookie: restOptions.cookie,\n                  status: restOptions.status,\n                  xfbml: restOptions.xfbml,\n                  frictionlessRequests: _this.frictionlessRequests\n                });\n                resolve(window.FB);\n              };\n\n              if (window.document.getElementById('facebook-jssdk')) {\n                return resolve(window.FB);\n              }\n\n              var js = window.document.createElement('script');\n              js.id = 'facebook-jssdk';\n              js.async = true;\n              js.defer = true;\n              js.src = \"https://\" + domain + \"/\" + language + \"/sdk\" + (chatSupport ? '/xfbml.customerchat' : '') + (debug ? '/debug' : '') + \".js\";\n              window.document.body.appendChild(js);\n            });\n            return _context.abrupt(\"return\", this.loadingPromise);\n\n          case 4:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, null, this);\n  };\n\n  _proto.process = function process(method, before, after) {\n    var fb;\n    return _regenerator.default.async(function process$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            if (before === void 0) {\n              before = [];\n            }\n\n            if (after === void 0) {\n              after = [];\n            }\n\n            _context2.next = 4;\n            return _regenerator.default.awrap(this.init());\n\n          case 4:\n            fb = _context2.sent;\n            return _context2.abrupt(\"return\", new Promise(function (resolve, reject) {\n              fb[method].apply(fb, before.concat([function (response) {\n                if (!response) {\n                  if (method === 'ui') return;\n                  reject(new Error('Response is undefined'));\n                } else if (response.error) {\n                  var _response$error = response.error,\n                      code = _response$error.code,\n                      type = _response$error.type,\n                      message = _response$error.message;\n                  var error = new Error(message);\n                  error.code = code;\n                  error.type = type;\n                  reject(error);\n                } else {\n                  resolve(response);\n                }\n              }], after));\n            }));\n\n          case 6:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, null, this);\n  };\n\n  _proto.ui = function ui(options) {\n    return _regenerator.default.async(function ui$(_context3) {\n      while (1) {\n        switch (_context3.prev = _context3.next) {\n          case 0:\n            return _context3.abrupt(\"return\", this.process('ui', [options]));\n\n          case 1:\n          case \"end\":\n            return _context3.stop();\n        }\n      }\n    }, null, this);\n  };\n\n  _proto.api = function api(path, method, params) {\n    return _regenerator.default.async(function api$(_context4) {\n      while (1) {\n        switch (_context4.prev = _context4.next) {\n          case 0:\n            if (method === void 0) {\n              method = Method.GET;\n            }\n\n            if (params === void 0) {\n              params = {};\n            }\n\n            return _context4.abrupt(\"return\", this.process('api', [path, method, params]));\n\n          case 3:\n          case \"end\":\n            return _context4.stop();\n        }\n      }\n    }, null, this);\n  };\n\n  _proto.login = function login(opts) {\n    return _regenerator.default.async(function login$(_context5) {\n      while (1) {\n        switch (_context5.prev = _context5.next) {\n          case 0:\n            if (opts === void 0) {\n              opts = null;\n            }\n\n            return _context5.abrupt(\"return\", this.process('login', [], [opts]));\n\n          case 2:\n          case \"end\":\n            return _context5.stop();\n        }\n      }\n    }, null, this);\n  };\n\n  _proto.logout = function logout() {\n    return _regenerator.default.async(function logout$(_context6) {\n      while (1) {\n        switch (_context6.prev = _context6.next) {\n          case 0:\n            return _context6.abrupt(\"return\", this.process('logout'));\n\n          case 1:\n          case \"end\":\n            return _context6.stop();\n        }\n      }\n    }, null, this);\n  };\n\n  _proto.getLoginStatus = function getLoginStatus() {\n    return _regenerator.default.async(function getLoginStatus$(_context7) {\n      while (1) {\n        switch (_context7.prev = _context7.next) {\n          case 0:\n            return _context7.abrupt(\"return\", this.process('getLoginStatus'));\n\n          case 1:\n          case \"end\":\n            return _context7.stop();\n        }\n      }\n    }, null, this);\n  };\n\n  _proto.getAuthResponse = function getAuthResponse() {\n    return _regenerator.default.async(function getAuthResponse$(_context8) {\n      while (1) {\n        switch (_context8.prev = _context8.next) {\n          case 0:\n            return _context8.abrupt(\"return\", this.process('getAuthResponse'));\n\n          case 1:\n          case \"end\":\n            return _context8.stop();\n        }\n      }\n    }, null, this);\n  };\n\n  _proto.getTokenDetail = function getTokenDetail(loginResponse) {\n    var response;\n    return _regenerator.default.async(function getTokenDetail$(_context9) {\n      while (1) {\n        switch (_context9.prev = _context9.next) {\n          case 0:\n            if (!(loginResponse.status === _LoginStatus.default.CONNECTED && loginResponse.authResponse)) {\n              _context9.next = 2;\n              break;\n            }\n\n            return _context9.abrupt(\"return\", loginResponse.authResponse);\n\n          case 2:\n            _context9.next = 4;\n            return _regenerator.default.awrap(this.getLoginStatus());\n\n          case 4:\n            response = _context9.sent;\n\n            if (!(response.status === _LoginStatus.default.CONNECTED && response.authResponse)) {\n              _context9.next = 7;\n              break;\n            }\n\n            return _context9.abrupt(\"return\", response.authResponse);\n\n          case 7:\n            throw new Error('Token is undefined');\n\n          case 8:\n          case \"end\":\n            return _context9.stop();\n        }\n      }\n    }, null, this);\n  };\n\n  _proto.getProfile = function getProfile(params) {\n    return _regenerator.default.async(function getProfile$(_context10) {\n      while (1) {\n        switch (_context10.prev = _context10.next) {\n          case 0:\n            return _context10.abrupt(\"return\", this.api('/me', Method.GET, params));\n\n          case 1:\n          case \"end\":\n            return _context10.stop();\n        }\n      }\n    }, null, this);\n  };\n\n  _proto.getTokenDetailWithProfile = function getTokenDetailWithProfile(params, response) {\n    var tokenDetail, profile;\n    return _regenerator.default.async(function getTokenDetailWithProfile$(_context11) {\n      while (1) {\n        switch (_context11.prev = _context11.next) {\n          case 0:\n            _context11.next = 2;\n            return _regenerator.default.awrap(this.getTokenDetail(response));\n\n          case 2:\n            tokenDetail = _context11.sent;\n            _context11.next = 5;\n            return _regenerator.default.awrap(this.getProfile(params));\n\n          case 5:\n            profile = _context11.sent;\n            return _context11.abrupt(\"return\", {\n              profile: profile,\n              tokenDetail: tokenDetail\n            });\n\n          case 7:\n          case \"end\":\n            return _context11.stop();\n        }\n      }\n    }, null, this);\n  };\n\n  _proto.getToken = function getToken() {\n    var authResponse;\n    return _regenerator.default.async(function getToken$(_context12) {\n      while (1) {\n        switch (_context12.prev = _context12.next) {\n          case 0:\n            _context12.next = 2;\n            return _regenerator.default.awrap(this.getTokenDetail());\n\n          case 2:\n            authResponse = _context12.sent;\n            return _context12.abrupt(\"return\", authResponse.accessToken);\n\n          case 4:\n          case \"end\":\n            return _context12.stop();\n        }\n      }\n    }, null, this);\n  };\n\n  _proto.getUserId = function getUserId() {\n    var authResponse;\n    return _regenerator.default.async(function getUserId$(_context13) {\n      while (1) {\n        switch (_context13.prev = _context13.next) {\n          case 0:\n            _context13.next = 2;\n            return _regenerator.default.awrap(this.getTokenDetail());\n\n          case 2:\n            authResponse = _context13.sent;\n            return _context13.abrupt(\"return\", authResponse.userID);\n\n          case 4:\n          case \"end\":\n            return _context13.stop();\n        }\n      }\n    }, null, this);\n  };\n\n  _proto.sendInvite = function sendInvite(to, options) {\n    return _regenerator.default.async(function sendInvite$(_context14) {\n      while (1) {\n        switch (_context14.prev = _context14.next) {\n          case 0:\n            return _context14.abrupt(\"return\", this.ui((0, _extends2.default)({\n              to: to,\n              method: 'apprequests'\n            }, options)));\n\n          case 1:\n          case \"end\":\n            return _context14.stop();\n        }\n      }\n    }, null, this);\n  };\n\n  _proto.postAction = function postAction(ogNamespace, ogAction, ogObject, ogObjectUrl, noFeedStory) {\n    var url;\n    return _regenerator.default.async(function postAction$(_context15) {\n      while (1) {\n        switch (_context15.prev = _context15.next) {\n          case 0:\n            url = \"/me/\" + ogNamespace + \":\" + ogAction + \"?\" + ogObject + \"=\" + encodeURIComponent(ogObjectUrl);\n\n            if (noFeedStory === true) {\n              url += '&no_feed_story=true';\n            }\n\n            return _context15.abrupt(\"return\", this.api(url, Method.POST));\n\n          case 3:\n          case \"end\":\n            return _context15.stop();\n        }\n      }\n    }, null, this);\n  };\n\n  _proto.getPermissions = function getPermissions() {\n    var response;\n    return _regenerator.default.async(function getPermissions$(_context16) {\n      while (1) {\n        switch (_context16.prev = _context16.next) {\n          case 0:\n            _context16.next = 2;\n            return _regenerator.default.awrap(this.api('/me/permissions'));\n\n          case 2:\n            response = _context16.sent;\n            return _context16.abrupt(\"return\", response.data);\n\n          case 4:\n          case \"end\":\n            return _context16.stop();\n        }\n      }\n    }, null, this);\n  };\n\n  _proto.hasPermissions = function hasPermissions(permissions) {\n    var usersPermissions, findedPermissions;\n    return _regenerator.default.async(function hasPermissions$(_context17) {\n      while (1) {\n        switch (_context17.prev = _context17.next) {\n          case 0:\n            _context17.next = 2;\n            return _regenerator.default.awrap(this.getPermissions());\n\n          case 2:\n            usersPermissions = _context17.sent;\n            findedPermissions = permissions.filter(function (p) {\n              var currentPermission = usersPermissions.find(function (row) {\n                var permission = row.permission,\n                    status = row.status;\n                return status === 'granted' && permission === p;\n              });\n              return !!currentPermission;\n            });\n            return _context17.abrupt(\"return\", findedPermissions.length === permissions.length);\n\n          case 5:\n          case \"end\":\n            return _context17.stop();\n        }\n      }\n    }, null, this);\n  };\n\n  _proto.subscribe = function subscribe(eventName, callback) {\n    var fb;\n    return _regenerator.default.async(function subscribe$(_context18) {\n      while (1) {\n        switch (_context18.prev = _context18.next) {\n          case 0:\n            _context18.next = 2;\n            return _regenerator.default.awrap(this.init());\n\n          case 2:\n            fb = _context18.sent;\n            fb.Event.subscribe(eventName, callback);\n\n          case 4:\n          case \"end\":\n            return _context18.stop();\n        }\n      }\n    }, null, this);\n  };\n\n  _proto.unsubscribe = function unsubscribe(eventName, callback) {\n    var fb;\n    return _regenerator.default.async(function unsubscribe$(_context19) {\n      while (1) {\n        switch (_context19.prev = _context19.next) {\n          case 0:\n            _context19.next = 2;\n            return _regenerator.default.awrap(this.init());\n\n          case 2:\n            fb = _context19.sent;\n            fb.Event.unsubscribe(eventName, callback);\n\n          case 4:\n          case \"end\":\n            return _context19.stop();\n        }\n      }\n    }, null, this);\n  };\n\n  _proto.parse = function parse(parentNode) {\n    var fb;\n    return _regenerator.default.async(function parse$(_context20) {\n      while (1) {\n        switch (_context20.prev = _context20.next) {\n          case 0:\n            _context20.next = 2;\n            return _regenerator.default.awrap(this.init());\n\n          case 2:\n            fb = _context20.sent;\n\n            if (typeof parentNode === 'undefined') {\n              fb.XFBML.parse();\n            } else {\n              fb.XFBML.parse(parentNode);\n            }\n\n          case 4:\n          case \"end\":\n            return _context20.stop();\n        }\n      }\n    }, null, this);\n  };\n\n  _proto.getRequests = function getRequests() {\n    return _regenerator.default.async(function getRequests$(_context21) {\n      while (1) {\n        switch (_context21.prev = _context21.next) {\n          case 0:\n            return _context21.abrupt(\"return\", this.api('/me/apprequests'));\n\n          case 1:\n          case \"end\":\n            return _context21.stop();\n        }\n      }\n    }, null, this);\n  };\n\n  _proto.removeRequest = function removeRequest(requestID) {\n    return _regenerator.default.async(function removeRequest$(_context22) {\n      while (1) {\n        switch (_context22.prev = _context22.next) {\n          case 0:\n            return _context22.abrupt(\"return\", this.api(requestID, Method.DELETE));\n\n          case 1:\n          case \"end\":\n            return _context22.stop();\n        }\n      }\n    }, null, this);\n  };\n\n  _proto.setAutoGrow = function setAutoGrow() {\n    var fb;\n    return _regenerator.default.async(function setAutoGrow$(_context23) {\n      while (1) {\n        switch (_context23.prev = _context23.next) {\n          case 0:\n            _context23.next = 2;\n            return _regenerator.default.awrap(this.init());\n\n          case 2:\n            fb = _context23.sent;\n            fb.Canvas.setAutoGrow();\n\n          case 4:\n          case \"end\":\n            return _context23.stop();\n        }\n      }\n    }, null, this);\n  };\n\n  _proto.paySimple = function paySimple(product, quantity) {\n    return _regenerator.default.async(function paySimple$(_context24) {\n      while (1) {\n        switch (_context24.prev = _context24.next) {\n          case 0:\n            if (quantity === void 0) {\n              quantity = 1;\n            }\n\n            return _context24.abrupt(\"return\", this.ui({\n              method: 'pay',\n              action: 'purchaseitem',\n              product: product,\n              quantity: quantity\n            }));\n\n          case 2:\n          case \"end\":\n            return _context24.stop();\n        }\n      }\n    }, null, this);\n  };\n\n  _proto.pay = function pay(product, options) {\n    return _regenerator.default.async(function pay$(_context25) {\n      while (1) {\n        switch (_context25.prev = _context25.next) {\n          case 0:\n            return _context25.abrupt(\"return\", this.ui((0, _extends2.default)({\n              method: 'pay',\n              action: 'purchaseitem',\n              product: product\n            }, options)));\n\n          case 1:\n          case \"end\":\n            return _context25.stop();\n        }\n      }\n    }, null, this);\n  };\n\n  return Facebook;\n}();\n/*\n  sendToFriends: function(options, callback) {\n    if(!options) {\n      options = {};\n    }\n\n    options.method = 'send';\n\n    this.afterLoad(function(err, fbApi) {\n      if(err) {\n        return callback(err);\n      }\n\n      FB.ui(options, function(response) {\n        fbApi._callCallbackByResponse(callback, response);\n      });\n    });\n  },\n\n  sendMessage: function(message, name, caption, description, url, imgUrl, callback) {\n    this.afterLoad(function(err, fbApi) {\n      if(err) {\n        return callback(err);\n      }\n\n      FB.ui({\n        method: 'stream.publish',\n        message: message,\n        attachment: {\n          name: name,\n          caption: caption,\n          description: description,\n          href: url,\n          media:[{\n            type: 'image',\n            src:  imgUrl,\n            href: url\n          }]\n        },\n        action_links: [{\n          text: 'Code',\n          href: url\n        }],\n        user_prompt_message: message\n      },\n      function(response) {\n        fbApi._callCallbackByResponse(callback, response);\n      });\n    });\n  },\n\n  sendInviteForm: function(options, callback) {\n    if(typeof options === 'function') {\n      callback = options;\n      options = {};\n    }\n\n    this.afterLoad(function(err, fbApi) {\n      if(err) {\n        return callback(err);\n      }\n\n      options.method = options.method || 'apprequests';\n\n\n      FB.ui(options, function(response) {\n        fbApi._callCallbackByResponse(callback, response);\n      });\n    });\n  },\n\n  checkPageLike: function(pageID, callback) {\n    this.afterLoad(function(err, fbApi) {\n      if(err) {\n        return callback(err);\n      }\n\n      fbApi.getUserID(function(err, userID) {\n        if(err) {\n          return callback(err);\n        }\n\n        var fqlQuery = `SELECT uid FROM page_fan WHERE page_id = ${pageID} and uid = ${userID}`;\n        var query = FB.Data.query(fqlQuery);\n\n        query.wait(function(rows) {\n          if (rows.length === 1 && rows[0].uid === userID) {\n            callback(null, true, query);\n          }\n          else {\n            callback(null, false, query);\n          }\n        });\n      });\n    });\n  },\n\n  sendMessageToFriend: function (friendID, link, callback) {\n    this.afterLoad(function(err, fbApi) {\n      if(err) {\n        return callback(err);\n      }\n\n      FB.ui({\n        to: friendID,\n        method: 'send',\n        link: link\n      }, function(response) {\n        fbApi._callCallbackByResponse(callback, response);\n      });\n    });\n  },\n\n  _prepareUsers: function(data) {\n    var users=[];\n\n    for(var index in data) {\n      var userData=data[index];\n\n      var user = {\n        provider_uid: 'facebook'+'_'+userData.uid,\n        provider: 'facebook',\n        id: userData.uid,\n        name: userData.name,\n        first_name: userData.first_name,\n        last_name: userData.last_name,\n        status: (userData.status!==null) ? userData.status : null,\n        image: '//graph.facebook.com/'+userData.uid+'/picture?'\n      };\n\n      users.push(user);\n    }\n\n    return users;\n  },\n\n  getUserList: function(callback) {\n    this.afterLoad(function(err, fbApi) {\n      if(err) {\n        return callback(err);\n      }\n\n      FB.api('fql', {\n        q: `\n          SELECT uid, name, first_name, last_name, online_presence, status\n          FROM user\n          WHERE uid IN\n            ( SELECT uid2 FROM friend WHERE uid1 = me()) ORDER BY name\n        `,\n      }, function (response)\n      {\n        var users = fbApi._prepareUsers(response.data);\n        callback(null, users, response);\n      });\n    });\n  },\n\n  postFeed: function(options, callback) {\n    this.afterLoad(function(err, fbApi) {\n      if(err) {\n        return callback(err);\n      }\n\n      options.method='feed';\n\n      FB.ui(options, function(response) {\n        fbApi._callCallbackByResponse(callback, response);\n      });\n    });\n  },\n\n  //need publish_stream\n  createAlbum: function(name, description, callback) {\n    this.afterLoad(function(err, fbApi) {\n      if(err) {\n        return callback(err);\n      }\n\n      FB.api('/me/albums', 'post', {\n        name: name,\n        description: description\n      },function(response) {\n        fbApi._callCallbackByResponse(callback, response);\n      });\n    });\n  },\n\n  //need publish_stream\n  addImageToAlbum: function(albumID, imageURL, message, callback) {\n    this.afterLoad(function(err, fbApi) {\n      if(err) {\n        return callback(err);\n      }\n\n      FB.api('/'+albumID+'/photos', 'post', {\n        message: message,\n        url: imageURL\n      }, function(response) {\n        fbApi._callCallbackByResponse(callback, response);\n      });\n    });\n  },\n\n  //'user_photos'\n  getAlbums: function(callback) {\n    this.afterLoad(function(err, fbApi) {\n      if(err) {\n        return callback(err);\n      }\n\n      FB.api('/me/albums', function(response) {\n        fbApi._callCallbackByResponse(callback, response);\n      });\n    });\n  },\n\n  //'user_photos'\n  getAlbumPhotos: function(albumID, callback) {\n    this.afterLoad(function(err, fbApi) {\n      if(err) {\n        return callback(err);\n      }\n\n      FB.api('/'+albumID+'/photos', function(response) {\n        fbApi._callCallbackByResponse(callback, response);\n      });\n    });\n  },\n\n  //'user_photos'\n  getAlbumCoverPicture: function(albumID, callback) {\n    this.afterLoad(function(err, fbApi) {\n      if(err) {\n        return callback(err);\n      }\n\n      FB.api('/'+albumID+'/picture', function(response) {\n        fbApi._callCallbackByResponse(callback, response);\n      });\n    });\n  },\n\n  //'publish_stream'\n  postPhoto: function(photoUrl, message, callback) {\n    this.afterLoad(function(err, fbApi) {\n      if(err) {\n        return callback(err);\n      }\n\n      FB.api('/me/photos', 'post', {\n        message: message,\n        url: photoUrl\n      },function(response) {\n        fbApi._callCallbackByResponse(callback, response);\n      });\n    });\n  },\n\n  getPageInfo: function(callback) {\n    this.afterLoad(function(err, fbApi) {\n      if(err) {\n        return callback(err);\n      }\n\n      FB.Canvas.getPageInfo(function(response) {\n        fbApi._callCallbackByResponse(callback, response);\n      });\n    });\n  }\n*/\n\n\nexports.default = Facebook;","map":{"version":3,"mappings":"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","names":["Method","GET","POST","DELETE","Facebook","options","domain","version","cookie","status","xfbml","language","frictionlessRequests","debug","chatSupport","appId","Error","wait","init","getAppId","loadingPromise","_context","Promise","resolve","_this","restOptions","window","fbAsyncInit","FB","document","getElementById","js","createElement","id","async","defer","src","body","appendChild","process","method","before","after","_context2","fb","reject","response","error","code","type","message","ui","api","path","params","login","opts","logout","getLoginStatus","getAuthResponse","getTokenDetail","loginResponse","LoginStatus","CONNECTED","authResponse","_context9","getProfile","getTokenDetailWithProfile","_context11","tokenDetail","profile","getToken","_context12","accessToken","getUserId","_context13","userID","sendInvite","to","postAction","ogNamespace","ogAction","ogObject","ogObjectUrl","noFeedStory","url","encodeURIComponent","getPermissions","_context16","data","hasPermissions","permissions","_context17","usersPermissions","findedPermissions","filter","p","currentPermission","find","row","permission","length","subscribe","eventName","callback","_context18","Event","unsubscribe","_context19","parse","parentNode","_context20","XFBML","getRequests","removeRequest","requestID","setAutoGrow","_context23","Canvas","paySimple","product","quantity","action","pay"],"sources":["/Users/mac/Desktop/sky/skyalert-New/node_modules/react-facebook/src/Facebook.js"],"sourcesContent":["// @flow\nimport LoginStatus from './constants/LoginStatus';\n\nexport const Method = {\n  GET: 'get',\n  POST: 'post',\n  DELETE: 'delete',\n};\n\nexport default class Facebook {\n  constructor(options = {}) {\n    this.options = {\n      domain: 'connect.facebook.net',\n      version: 'v3.2',\n      cookie: false,\n      status: false,\n      xfbml: false,\n      language: 'en_US',\n      frictionlessRequests: false,\n      debug: false,\n      chatSupport: false,\n      ...options,\n    };\n\n    if (!this.options.appId) {\n      throw new Error('You need to set appId');\n    }\n\n    if (!this.options.wait) {\n      this.init();\n    }\n  }\n\n  getAppId(): string {\n    return this.options.appId;\n  }\n\n  async init() {\n    if (this.loadingPromise) {\n      return this.loadingPromise;\n    }\n\n    this.loadingPromise = new Promise((resolve) => {\n      const {\n        domain,\n        language,\n        debug,\n        chatSupport,\n        ...restOptions\n      } = this.options;\n\n      window.fbAsyncInit = () => {\n        window.FB.init({\n          appId: restOptions.appId,\n          version: restOptions.version,\n          cookie: restOptions.cookie,\n          status: restOptions.status,\n          xfbml: restOptions.xfbml,\n          frictionlessRequests: this.frictionlessRequests,\n        });\n\n        resolve(window.FB);\n      };\n\n      if (window.document.getElementById('facebook-jssdk')) {\n        return resolve(window.FB);\n      }\n\n      const js = window.document.createElement('script');\n      js.id = 'facebook-jssdk';\n      js.async = true;\n      js.defer = true;\n      js.src = `https://${domain}/${language}/sdk${chatSupport ? '/xfbml.customerchat' : ''}${debug ? '/debug' : ''}.js`;\n\n      window.document.body.appendChild(js);\n    });\n\n    return this.loadingPromise;\n  }\n\n  async process(method, before = [], after = []) {\n    const fb = await this.init();\n\n    return new Promise((resolve, reject) => {\n      fb[method](...before, (response) => {\n        if (!response) {\n          if (method === 'ui') return;\n          reject(new Error('Response is undefined'));\n        } else if (response.error) {\n          const { code, type, message } = response.error;\n\n          const error = new Error(message);\n          error.code = code;\n          error.type = type;\n\n          reject(error);\n        } else {\n          resolve(response);\n        }\n      }, ...after);\n    });\n  }\n\n  async ui(options) {\n    return this.process('ui', [options]);\n  }\n\n  async api(path, method = Method.GET, params = {}) {\n    return this.process('api', [path, method, params]);\n  }\n\n  async login(opts = null) {\n    return this.process('login', [], [opts]);\n  }\n\n  async logout() {\n    return this.process('logout');\n  }\n\n  async getLoginStatus() {\n    return this.process('getLoginStatus');\n  }\n\n  async getAuthResponse() {\n    return this.process('getAuthResponse');\n  }\n\n  async getTokenDetail(loginResponse) {\n    if (loginResponse.status === LoginStatus.CONNECTED && loginResponse.authResponse) {\n      return loginResponse.authResponse;\n    }\n\n    const response = await this.getLoginStatus();\n\n    if (response.status === LoginStatus.CONNECTED && response.authResponse) {\n      return response.authResponse;\n    }\n\n    throw new Error('Token is undefined');\n  }\n\n  async getProfile(params) {\n    return this.api('/me', Method.GET, params);\n  }\n\n  async getTokenDetailWithProfile(params, response) {\n    const tokenDetail = await this.getTokenDetail(response);\n    const profile = await this.getProfile(params);\n\n    return {\n      profile,\n      tokenDetail,\n    };\n  }\n\n  async getToken() {\n    const authResponse = await this.getTokenDetail();\n    return authResponse.accessToken;\n  }\n\n  async getUserId() {\n    const authResponse = await this.getTokenDetail();\n    return authResponse.userID;\n  }\n\n  async sendInvite(to, options) {\n    return this.ui({\n      to,\n      method: 'apprequests',\n      ...options,\n    });\n  }\n\n\n  async postAction(ogNamespace, ogAction, ogObject, ogObjectUrl, noFeedStory) {\n    let url = `/me/${ogNamespace}:${ogAction}?${ogObject}=${encodeURIComponent(ogObjectUrl)}`;\n\n    if (noFeedStory === true) {\n      url += '&no_feed_story=true';\n    }\n\n    return this.api(url, Method.POST);\n  }\n\n  async getPermissions() {\n    const response = await this.api('/me/permissions');\n    return response.data;\n  }\n\n  async hasPermissions(permissions) {\n    const usersPermissions = await this.getPermissions();\n\n    const findedPermissions = permissions.filter((p) => {\n      const currentPermission = usersPermissions.find((row) => {\n        const { permission, status } = row;\n        return status === 'granted' && permission === p;\n      });\n\n      return !!currentPermission;\n    });\n\n    return findedPermissions.length === permissions.length;\n  }\n\n  async subscribe(eventName, callback) {\n    const fb = await this.init();\n    fb.Event.subscribe(eventName, callback);\n  }\n\n  async unsubscribe(eventName, callback) {\n    const fb = await this.init();\n    fb.Event.unsubscribe(eventName, callback);\n  }\n\n  async parse(parentNode) {\n    const fb = await this.init();\n\n    if (typeof parentNode === 'undefined') {\n      fb.XFBML.parse();\n    } else {\n      fb.XFBML.parse(parentNode);\n    }\n  }\n\n  async getRequests() {\n    return this.api('/me/apprequests');\n  }\n\n  async removeRequest(requestID) {\n    return this.api(requestID, Method.DELETE);\n  }\n\n  async setAutoGrow() {\n    const fb = await this.init();\n    fb.Canvas.setAutoGrow();\n  }\n\n  async paySimple(product, quantity = 1) {\n    return this.ui({\n      method: 'pay',\n      action: 'purchaseitem',\n      product,\n      quantity,\n    });\n  }\n\n  async pay(product, options) {\n    return this.ui({\n      method: 'pay',\n      action: 'purchaseitem',\n      product,\n      ...options,\n    });\n  }\n}\n\n/*\n  sendToFriends: function(options, callback) {\n    if(!options) {\n      options = {};\n    }\n\n    options.method = 'send';\n\n    this.afterLoad(function(err, fbApi) {\n      if(err) {\n        return callback(err);\n      }\n\n      FB.ui(options, function(response) {\n        fbApi._callCallbackByResponse(callback, response);\n      });\n    });\n  },\n\n  sendMessage: function(message, name, caption, description, url, imgUrl, callback) {\n    this.afterLoad(function(err, fbApi) {\n      if(err) {\n        return callback(err);\n      }\n\n      FB.ui({\n        method: 'stream.publish',\n        message: message,\n        attachment: {\n          name: name,\n          caption: caption,\n          description: description,\n          href: url,\n          media:[{\n            type: 'image',\n            src:  imgUrl,\n            href: url\n          }]\n        },\n        action_links: [{\n          text: 'Code',\n          href: url\n        }],\n        user_prompt_message: message\n      },\n      function(response) {\n        fbApi._callCallbackByResponse(callback, response);\n      });\n    });\n  },\n\n  sendInviteForm: function(options, callback) {\n    if(typeof options === 'function') {\n      callback = options;\n      options = {};\n    }\n\n    this.afterLoad(function(err, fbApi) {\n      if(err) {\n        return callback(err);\n      }\n\n      options.method = options.method || 'apprequests';\n\n\n      FB.ui(options, function(response) {\n        fbApi._callCallbackByResponse(callback, response);\n      });\n    });\n  },\n\n  checkPageLike: function(pageID, callback) {\n    this.afterLoad(function(err, fbApi) {\n      if(err) {\n        return callback(err);\n      }\n\n      fbApi.getUserID(function(err, userID) {\n        if(err) {\n          return callback(err);\n        }\n\n        var fqlQuery = `SELECT uid FROM page_fan WHERE page_id = ${pageID} and uid = ${userID}`;\n        var query = FB.Data.query(fqlQuery);\n\n        query.wait(function(rows) {\n          if (rows.length === 1 && rows[0].uid === userID) {\n            callback(null, true, query);\n          }\n          else {\n            callback(null, false, query);\n          }\n        });\n      });\n    });\n  },\n\n  sendMessageToFriend: function (friendID, link, callback) {\n    this.afterLoad(function(err, fbApi) {\n      if(err) {\n        return callback(err);\n      }\n\n      FB.ui({\n        to: friendID,\n        method: 'send',\n        link: link\n      }, function(response) {\n        fbApi._callCallbackByResponse(callback, response);\n      });\n    });\n  },\n\n  _prepareUsers: function(data) {\n    var users=[];\n\n    for(var index in data) {\n      var userData=data[index];\n\n      var user = {\n        provider_uid: 'facebook'+'_'+userData.uid,\n        provider: 'facebook',\n        id: userData.uid,\n        name: userData.name,\n        first_name: userData.first_name,\n        last_name: userData.last_name,\n        status: (userData.status!==null) ? userData.status : null,\n        image: '//graph.facebook.com/'+userData.uid+'/picture?'\n      };\n\n      users.push(user);\n    }\n\n    return users;\n  },\n\n  getUserList: function(callback) {\n    this.afterLoad(function(err, fbApi) {\n      if(err) {\n        return callback(err);\n      }\n\n      FB.api('fql', {\n        q: `\n          SELECT uid, name, first_name, last_name, online_presence, status\n          FROM user\n          WHERE uid IN\n            ( SELECT uid2 FROM friend WHERE uid1 = me()) ORDER BY name\n        `,\n      }, function (response)\n      {\n        var users = fbApi._prepareUsers(response.data);\n        callback(null, users, response);\n      });\n    });\n  },\n\n  postFeed: function(options, callback) {\n    this.afterLoad(function(err, fbApi) {\n      if(err) {\n        return callback(err);\n      }\n\n      options.method='feed';\n\n      FB.ui(options, function(response) {\n        fbApi._callCallbackByResponse(callback, response);\n      });\n    });\n  },\n\n  //need publish_stream\n  createAlbum: function(name, description, callback) {\n    this.afterLoad(function(err, fbApi) {\n      if(err) {\n        return callback(err);\n      }\n\n      FB.api('/me/albums', 'post', {\n        name: name,\n        description: description\n      },function(response) {\n        fbApi._callCallbackByResponse(callback, response);\n      });\n    });\n  },\n\n  //need publish_stream\n  addImageToAlbum: function(albumID, imageURL, message, callback) {\n    this.afterLoad(function(err, fbApi) {\n      if(err) {\n        return callback(err);\n      }\n\n      FB.api('/'+albumID+'/photos', 'post', {\n        message: message,\n        url: imageURL\n      }, function(response) {\n        fbApi._callCallbackByResponse(callback, response);\n      });\n    });\n  },\n\n  //'user_photos'\n  getAlbums: function(callback) {\n    this.afterLoad(function(err, fbApi) {\n      if(err) {\n        return callback(err);\n      }\n\n      FB.api('/me/albums', function(response) {\n        fbApi._callCallbackByResponse(callback, response);\n      });\n    });\n  },\n\n  //'user_photos'\n  getAlbumPhotos: function(albumID, callback) {\n    this.afterLoad(function(err, fbApi) {\n      if(err) {\n        return callback(err);\n      }\n\n      FB.api('/'+albumID+'/photos', function(response) {\n        fbApi._callCallbackByResponse(callback, response);\n      });\n    });\n  },\n\n  //'user_photos'\n  getAlbumCoverPicture: function(albumID, callback) {\n    this.afterLoad(function(err, fbApi) {\n      if(err) {\n        return callback(err);\n      }\n\n      FB.api('/'+albumID+'/picture', function(response) {\n        fbApi._callCallbackByResponse(callback, response);\n      });\n    });\n  },\n\n  //'publish_stream'\n  postPhoto: function(photoUrl, message, callback) {\n    this.afterLoad(function(err, fbApi) {\n      if(err) {\n        return callback(err);\n      }\n\n      FB.api('/me/photos', 'post', {\n        message: message,\n        url: photoUrl\n      },function(response) {\n        fbApi._callCallbackByResponse(callback, response);\n      });\n    });\n  },\n\n  getPageInfo: function(callback) {\n    this.afterLoad(function(err, fbApi) {\n      if(err) {\n        return callback(err);\n      }\n\n      FB.Canvas.getPageInfo(function(response) {\n        fbApi._callCallbackByResponse(callback, response);\n      });\n    });\n  }\n*/\n"]},"metadata":{},"sourceType":"script"}